// unload


// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã.


/* –ö—Ä–∞—Ç–∫–æ

    –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ unload. 
    –ú—ã –º–æ–∂–µ–º –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ, –ø–æ–¥–ø–∏—Å–∞–≤—à–∏—Å—å –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ —É –æ–±—ä–µ–∫—Ç–∞ window.

*/ 










// –ö–∞–∫ –ø–∏—à–µ—Ç—Å—è:


window.addEventListener('unload', (event) => {
    console.log('–í—ã –≤—ã—à–ª–∏ —Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã')
    console.log(event.target)
    console.log(event.currentTarget)
    console.log(event.type)
})









/* –ö–∞–∫ –ø–æ–Ω—è—Ç—å

    –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±–µ –≤—Å—ë —É–≤–µ—à–∞–Ω–æ —Ç—Ä–µ–∫–∏–Ω–≥–æ–º: –∫–ª–∏–∫–∏, –ø–µ—Ä–µ—Ö–æ–¥—ã, –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–µ–∫—Ü–∏–π –∏ 
    –µ—â—ë –∫—É—á–∞ –≤—Å–µ–≥–æ. –ü–æ—á–µ–º—É –±—ã –Ω–µ —Ç—Ä–µ–∫–∞—Ç—å —É—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã?

*/ 


window.addEventListener('unload', () => {
    const someUsefulData = getSomeUsefulData()

    navigator.sendBeacon('/some-endpoint', someUsefulData)
})







/* –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–¥–µ –≤—ã—à–µ? 

    –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, —Ñ—É–Ω–∫—Ü–∏—è getSomeUsefulData() —Å–æ–±–µ—Ä—ë—Ç –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é 
    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∞ –º–µ—Ç–æ–¥ sendBeacon() –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ—ë –ø–æ –∞–¥—Ä–µ—Å—É /some-endpoint. –ú–µ—Ç–æ–¥ 
    sendBeacon() ‚Äî —ç—Ç–æ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ 
    —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∏ –µ—â—ë –Ω–µ –ø—Ä–∏–Ω—è—Ç –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç W3C, –Ω–æ —É–∂–µ –¥–∞–≤–Ω–æ 
    –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏.
    
*/ 






/* –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, 

    —á—Ç–æ –æ–Ω–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –Ω–µ –±—É–¥–µ—Ç –º–µ—à–∞—Ç—å –≤—ã–≥—Ä—É–∑–∫–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã 
    –∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ª–µ–¥—É—é—â–µ–π.

    –†–∞–Ω—å—à–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–æ—Å—Ç—ã–ª—å–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 
    —á—Ç–æ-–ª–∏–±–æ –≤ –º–æ–º–µ–Ω—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä:



    1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã XMLHttpRequest.
    2. –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ src (—Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ –ø–∏–∫—Å–µ–ª–∏).
    3. –ò–Ω–æ–≥–¥–∞ –¥–∞–∂–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –ø—É—Å—Ç—ã–µ —Ü–∏–∫–ª—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.



    –ú–µ—Ç–æ–¥ sendBeacon –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, 
    –Ω–µ –º–µ—à–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É —Ö–æ–¥—É –≤–µ—â–µ–π.
    
*/ 









/* –ê–Ω—Ç–æ–Ω –°—É–±–±–æ—Ç–∏–Ω —Å–æ–≤–µ—Ç—É–µ—Ç

    üõ† –°–æ–±—ã—Ç–∏–µ unload –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–µ–∫–∏–Ω–≥–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.


    üõ† –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ —Å–æ–±—ã—Ç–∏–µ unload –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. 
    –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ–Ω–æ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏—Ç:


    1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—â–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

    2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    
    3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä —á–µ—Ä–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.



    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ visibilitychange –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã unload.

*/ 